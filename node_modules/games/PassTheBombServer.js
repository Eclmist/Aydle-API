function PassTheBombServer()
{
   
}


PassTheBombServer.Init = function(io,socket)
{
    socket.on('explode', function(data)
    {
        console.log('explooooossionnnnnnnnnnnnnnn');
    });

    socket.on('passBomb', function(data)
    {
        // ask the next player to generate question
        io.sockets.connected[socket.currentRoom.GetNextTarget().playerID].emit('getBomb');
    });


    // for now lets use this to check the presence of all players
    socket.on('present',function(data)
    {
        socket.emit('getPlayerCountForGame',socket.currentRoom.games[socket.currentRoom.games.length-1]
        ,CheckGameStatus);

        // callback function
        function CheckGameStatus(playerCount)
        {
            // When everyone is ready, first bomb goes to initial room target aka. the host
            if(socket.currentRoom.players.length === playerCount)
            {
                console.log('we can start now');
                io.sockets.connected[socket.currentRoom.GetCurrentTarget().playerID].emit('getBomb');
                // server will sync a the timer from a single client
                io.sockets.connected[socket.currentRoom.GetCurrentTarget().playerID].emit('startTimer');           
            }
                
        }

        
    });


    socket.on('syncSeconds',function(seconds)
    {
        io.in(socket.currentRoom.code).emit('updateTimer',seconds);
    });

    socket.on('explosion',function()
    {
        io.sockets.connected[socket.currentRoom.GetCurrentTarget().playerID].emit('gameOver');
    });

    

    

    



}


module.exports = PassTheBombServer;



class SimpleGameLoop{
    constructor(){
        this.updateCallback = undefined;
        this.startCallback = undefined;
        this.hasStarted = false;
        this.startTime = 0
        this.deltaTime = 0;
    }

    run(){
        if(this.updateCallback !== undefined){
            this.hasStarted = true;
            this.startCallback();
            this.startTime = Date.now();
            this.tick();
        }
    }

    tick(){
        
        this.updateCallback();
        //return delta in seconds
        this.deltaTime = (Date.now() - this.startTime) / 1000;
        this.startTime = Date.now();
        process.nextTick(() => this.tick());
    }

    setUpdate(callback){
        this.updateCallback = callback;
    }

    setStart(callback){
        this.startCallback = callback;
    }
}

module.exports = SimpleGameLoop;